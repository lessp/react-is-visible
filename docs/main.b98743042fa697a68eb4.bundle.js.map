{"version":3,"file":"main.b98743042fa697a68eb4.bundle.js","sources":["webpack:///./src/VisibilityObserver.js"],"sourcesContent":["let intersectionObserver\nlet intersectionObserverOptions = {}\nconst subscribers = new WeakMap()\n\nconst handleIntersections = entries =>\n  entries.forEach(entry => subscribers.get(entry.target).call(null, entry))\n\nconst getIntersectionObserver = () => {\n  if (!intersectionObserver) {\n    intersectionObserver = new IntersectionObserver(\n      handleIntersections,\n      intersectionObserverOptions\n    )\n  }\n\n  return intersectionObserver\n}\n\nconst setIntersectionObserverOptions = options => {\n  if (intersectionObserver) {\n    return\n  }\n\n  intersectionObserverOptions = options\n}\n\nconst watch = (domNode, callback) => {\n  if (!domNode || subscribers.has(domNode)) {\n    return\n  }\n\n  subscribers.set(domNode, callback)\n  getIntersectionObserver().observe(domNode)\n\n  return () => unwatch(domNode)\n}\n\nconst unwatch = domNode => {\n  intersectionObserver.unobserve(domNode)\n  subscribers.delete(domNode)\n}\n\nconst getSubscribers = () => subscribers\n\nexport default {\n  getSubscribers,\n  setIntersectionObserverOptions,\n  unwatch,\n  watch,\n}\n"],"mappings":"AAAA","sourceRoot":""}